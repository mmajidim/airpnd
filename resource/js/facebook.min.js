function fbSignUp(){FB.getLoginStatus(function(e){switch(e.status.toLowerCase()){case"connected":signUpAPI();$("#fbcSuccess").removeClass("hide");$("#passwordDiv").addClass("hide");$("#confirmPasswordDiv").addClass("hide");break;case"not_authorized":default:$("#signUpModal").modal("hide");$.session.clear("isFbLoggedIn");clearFBDetails();facebookLogin();break}})}function fbLogin(){FB.getLoginStatus(function(e){switch(e.status.toLowerCase()){case"connected":$("#signInModal").modal("hide");$("#modalFade").removeClass("hide");$("#fbOverlay").removeClass("hide");logInAPI();break;case"not_authorized":default:$("#signInModal").modal("hide");$.session.clear("isFbLoggedIn");clearFBDetails();facebookLogin();break}})}function signUpAPI(){$.session.set("isFBVerified",true);$("#modalFade").removeClass("hide");$("#fbOverlay").removeClass("hide");FB.api("/me",function(e){fillDetails(e)})}function logInAPI(){FB.api("/me",function(e){var t=getByUserName(e.email);$("#modalFade").addClass("hide");$("#fbOverlay").addClass("hide");if(t==-1){showAlertBox("Error",ERROR_MSG)}else if(t.retCode==0){$("#fbcSuccess").removeClass("hide");$("#passwordDiv").addClass("hide");$("#confirmPasswordDiv").addClass("hide");signUpAPI()}else if(t.retCode==1){if(t.user.status==1){validateRole(t.user);window.location.reload(true)}else{showAlertBox("Inactive User",loadActivationMessage(t.user.email))}}})}function fillDetails(e){if(!$("#signUpModal").data("modal").isShown){loadSignUpModal()}if(e.email==undefined){$("#fbcSuccess").addClass("hide");$("#firstNameSignUp").removeAttr("disabled");$("#lastNameSignUp").removeAttr("disabled");$("#middleNameSignUp").removeAttr("disabled");$("#emailSignUp").removeAttr("disabled");$("#passwordDiv").removeClass("hide");$("#confirmPasswordDiv").removeClass("hide");$("#signUpButton").removeClass("fbSignUp");$("#simpleCreate").addClass("hide");$("#fbsignUpLink").removeClass("hide")}$("#signUpModal").modal("show");$("#firstNameSignUp").val(e.first_name);$("#middleNameSignUp").val(e.middle_name||"");$("#lastNameSignUp").val(e.last_name);$("#emailSignUp").val(e.email);$("#modalFade").addClass("hide");$("#fbOverlay").addClass("hide")}function fbLogOut(){FB.getLoginStatus(function(e){if(e.status.toLowerCase()=="connected"){FB.logout(function(e){});$.session.clear("fbLoggedIn");clearFBDetails();$.session.clearAll()}})}function facebookLogin(){FB.login(function(e){if(e.status=="connected"){$("#signInModal").modal("hide");$("#modalFade").removeClass("hide");$("#fbOverlay").removeClass("hide");logInAPI()}else{if($.session.get("modalPopUp")=="signInModal"){$("#signInModal").modal("show")}else if($.session.get("modalPopUp")=="signUpModal"){clearFBDetails();$("#signUpModal").modal("show")}}},{scope:"user_address, user_mobile_phone, email"})}window.fbAsyncInit=function(){FB.init({appId:FACEBOOK_APP_ID,channelUrl:SITE_URL+"index.php",status:true,cookie:true,xfbml:true})};(function(e){var t,n="facebook-jssdk",r=e.getElementsByTagName("script")[0];if(e.getElementById(n)){return}t=e.createElement("script");t.id=n;t.async=true;t.src="//connect.facebook.net/en_US/all.js";r.parentNode.insertBefore(t,r)})(document);