function validateLogin(){var e=getEncode($.session.get("userName"),getUrlVars()["iv"]);var t=getEncode($("#passwordActivationPage").val(),getUrlVars()["iv"]);var n={action:VALIDATE_USER,encodeUN:JSON.stringify(e.activate),encodePass:JSON.stringify(t.activate),iv:JSON.stringify(getUrlVars()["iv"]),activate:true};$.ajax({type:"POST",url:API_URL,data:n,dataType:"json",headers:HEADER,error:function(e){$("#loaderVerifyPassword").hide();showAlertBox("Error",ERROR_MSG)},success:function(e){if(e.retCode==1){$("#loaderVerifyPassword").hide();$("#verifyAccountForm").hide();$.session.set(e.user.email,e.user.status);if(validateRole(e.user)){$("#signInLoader").hide();$("#signInModal").modal("hide");if(window.location.pathname.indexOf("activation")>-1){showAlertBox("Verified","Your email address has been verified. You are being logged in.");setTimeout(function(){window.location=SITE_URL+"index.php"},1500)}else{window.location.reload(true)}}}else if(e.retCode==0){$("#loaderVerifyPassword").hide();$("#activationSuccess").addClass("hide");$("#activationError").slideDown();setTimeout(function(){$("#activationError").slideUp()},2e3)}}})}$(function(){if(isLoggedIn()){$("#verifyAccountForm").hide();showAlertBox("Verified","Your email address is already verified.",SITE_URL+"index.php");return false}var e=typeof getUrlVars()["activate"]=="undefined"||getUrlVars()["activate"]==null?false:true;if(e){$("#verifyAccountForm").show();var t=decodeURIComponent(getUrlVars()["activate"]);var n=decodeURIComponent(getUrlVars()["iv"]);var r=getDecode(t,n);$.session.set("userName",r.userName);$.session.set("password",r.password);$("#userNameLabel").html(r.userName)}else{$("#activationActivationLinkError").slideDown("slow");$("#verifyAccountForm").hide()}$("#verifyAccountForm").validate({ignore:":hidden .ignore",onfocusout:function(e){if(!$(e).is("select")&&e.value===""&&e.defaultValue===""){$(e).valid()}if($(e).valid()){$(e).removeClass("error").addClass("success")}else{$(e).removeClass("success").addClass("error")}},showErrors:function(e,t){$.each(this.successList,function(e,t){return $(t).popover("hide")});return $.each(t,function(e,t){getErrorPopupTemplate(t)})},rules:{passwordActivationPage:{required:true}},messages:{passwordActivationPage:{required:VALIDATION_ERROR_MSG_INPUT.replace("{element}","password")}},invalidHandler:function(e,t){if(t.numberOfInvalids()){return false}},submitHandler:function(e){$("#loaderVerifyPassword").show();if($.session.get($.session.get("userName"))=="1"){$("#activationSuccess").empty();var t="<p><center><strong><p><h1>&#9786;</h1>";t+="</p></strong></center><p><center><strong>";t+="<p>Your email address is already verified.";t+=" Please continue to Sign In using";t+=" your username and your  password.</p>";t+="</strong></center>";$("#activationSuccess").append(t);$("#loaderVerifyPassword").hide();$("#activationSuccess").slideDown();$("#verifyAccountForm").hide()}else{validateLogin()}}});$(document).on("click","#needAccount",function(){$("#signUpModal").modal("show")})})