$(function(){$(".closeIcon").hide();$(document).on("click",".confirmRiderbtn",function(e){$(".confirmRiderLoader").removeClass("hide");$(this).prop("disabled",true);var t=pendingPaymentLift($.session.get("liftid"));if(t){$(".confirmRiderLoader").addClass("hide");showAlertBox("Alert","Lift status is set to pending payment",SITE_URL+"findRider.php");moveTotop()}});var e=sessionManager("getSession","user");if(e){var t=typeof getUrlVars()["link"]=="undefined"||getUrlVars()["link"]==null?false:true;if(t){var t=decodeURIComponent(getUrlVars()["link"]);var n=decodeURIComponent(getUrlVars()["iv"]);var r=getDecodeLink(t,n);$.session.set("liftid",r.data1);$.session.set("rideId",r.data2);$.session.set("seats",r.data3);var i=getLiftById($.session.get("liftid"));if(i.lift.status!=1){$("#confirmRiderContainer").addClass("hide");$(".confirmRiderLoader").addClass("hide");showAlertBox("Expired","Link has been expired",SITE_URL+"findRider.php");moveTotop()}if(i.retCode){i=i.lift;var s=getCustomerByCustomerId(i.customerId,true);if($("response id",s).text()!=-1){var o='<table class="table table-hover table-bordered">';o+='<tr><td colspan="99">';o+="<h6>The rider information is";o+=" as follow:</h6></td></tr>";var u=i.note||"-";var a=r.data3||"-";var f=i.smoker==1?"Y":"N";var l=$.getDateTime.formatDate(i.dt);var c=$.getDateTime.formatTime(i.dt);var h=$("response firstName",s).text()+" "+$("response lastName",s).text();var p=i.contribution!=null?"$"+i.contribution:"-";o+="<tr> <td> Rider Name</td><td>"+h+"</td></tr>";o+="<tr> <td> Rider Phone</td><td>"+$("response phone1",s).text()+"</td></tr>";o+="<tr> <td> Rider Email</td><td>"+$("response email",s).text()+"</td></tr>";o+="<tr> <td> Pick Up</td><td>"+i.start+"</td></tr>";o+="<tr> <td> Drop Off</td><td>"+i.to+"</td></tr>";o+="<tr> <td> Date</td><td>"+l+"</td></tr>";o+="<tr> <td> Time </td><td>"+c+"</td></tr>";o+="<tr> <td> Seats </td><td>"+a+"</td></tr>";o+="<tr> <td> Contribution </td><td> "+p+"</td></tr>";o+="<tr> <td> Smoker </td><td>"+f+"</td></tr>";o+='<tr> <td> Note </td><td  colspan="2"';o+=' class="textBreak"> '+u+"</td></tr>";o+='<tr> <td colspan="2"> ';o+='<button type="submit" name="confirm"';o+=' class="btn btn-success';o+=' confirmRiderbtn span4">';o+="Confirm Rider</button>";o+='<div class="confirmRiderLoader';o+=' hide span2">';o+='<img src="resource/';o+='images/searchLoader.GIF" alt=".."/>';o+="</div></td></tr>";o+="</table>";$("#confirmRider").append(o)}}else{showAlertBox("Error","link is not valid",SITE_URL+"findRider.php")}}}else{loadSignInModal()}})