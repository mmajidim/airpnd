function clearFBDetails(){$("#fbcSuccess").addClass("hide");$("#signUpModal").clearForm();$("#firstNameSignUp").removeAttr("disabled");$("#lastNameSignUp").removeAttr("disabled");$("#middleNameSignUp").removeAttr("disabled");$("#emailSignUp").removeAttr("disabled");$("#passwordDiv").removeClass("hide");$("#confirmPasswordDiv").removeClass("hide")}function signInValidation(){$("#signInForm").validate({ignore:":hidden .ignore",focusInvalid:false,focusCleanup:true,onfocusout:function(e){if(!$(e).is("select")&&e.value===""&&e.defaultValue===""){$(e).valid()}if($(e).valid()){$(e).removeClass("error").addClass("success")}else{$(e).removeClass("success").addClass("error")}},showErrors:function(e,t){$.each(this.successList,function(e,t){return $(t).popover("hide")});return $.each(t,function(e,t){getErrorPopupTemplate(t)})},rules:{emailAddress:{required:true,email:true},password:{required:true}},messages:{emailAddress:{required:VALIDATION_ERROR_MSG_INPUT.replace("{element}","email address"),email:VALIDATION_ERROR_MSG_INPUT.replace("{element}","valid email address")},password:{required:VALIDATION_ERROR_MSG_INPUT.replace("{element}","password")}},invalidHandler:function(e,t){if(t.numberOfInvalids()){return false}},submitHandler:function(e){$("#signInLoader").show();$("#signInLoader").removeClass("hide");validateActiveLogin()}})}function signUpValidation(){$("#signUpForm").validate({ignore:".ignore, :hidden",focusInvalid:false,focusCleanup:true,onfocusout:function(e){if(!$(e).is("select")&&e.value===""&&e.defaultValue===""){$(e).valid()}if(!$(e).hasClass("ignore")){if($(e).valid()){$(e).removeClass("error").addClass("success")}else{$(e).removeClass("success").addClass("error")}}},showErrors:function(e,t){$.each(this.successList,function(e,t){return $(t).popover("hide")});return $.each(t,function(e,t){getErrorPopupTemplate(t)})},rules:{firstName:{required:true},lastName:{required:true},emailSignUp:{required:true,email:true},phoneNumber:{required:true},password:{required:true},confirmPassword:{required:true,equalTo:"#passwordSignUp"},check:{required:true},termsCondition:{required:true}},messages:{firstName:{required:VALIDATION_ERROR_MSG_INPUT.replace("{element}","first name")},lastName:{required:VALIDATION_ERROR_MSG_INPUT.replace("{element}","last name")},phoneNumber:{required:VALIDATION_ERROR_MSG_INPUT.replace("{element}","phone number")},emailSignUp:{required:VALIDATION_ERROR_MSG_INPUT.replace("{element}","email address"),email:VALIDATION_ERROR_MSG_INPUT.replace("{element}","valid email address")},password:{required:VALIDATION_ERROR_MSG_INPUT.replace("{element}","password")},confirmPassword:{required:VALIDATION_ERROR_MSG_INPUT.replace("{element}","confirm password"),equalTo:"password does not match"},check:{required:VALIDATION_ERROR_MSG_CHECK},termsCondition:{required:"Please accept terms and conditions."}},invalidHandler:function(e,t){if(t.numberOfInvalids()){return false}},submitHandler:function(e){$("#signUpButton").attr("disabled","disabled");$("#signUpLoader").show();$("#signUpModal .closeIcon").addClass("hide");getUserByUserName($("#emailSignUp").val())}})}function forgotPasswordValidation(){$("#forgotPasswordForm").validate({ignore:":hidden .ignore",focusInvalid:false,focusCleanup:true,onfocusout:function(e){if(!$(e).is("select")&&e.value===""&&e.defaultValue===""){$(e).valid()}if($(e).valid()){$(e).removeClass("error").addClass("success")}else{$(e).removeClass("success").addClass("error")}},showErrors:function(e,t){$.each(this.successList,function(e,t){return $(t).popover("hide")});return $.each(t,function(e,t){getErrorPopupTemplate(t,"top")})},rules:{emailAddress:{required:true,email:true}},messages:{emailAddress:{required:VALIDATION_ERROR_MSG_INPUT.replace("{element}","email address"),email:VALIDATION_ERROR_MSG_INPUT.replace("{element}","valid email address")}},invalidHandler:function(e,t){if(t.numberOfInvalids()){return false}},submitHandler:function(e){$("#loaderForgotPassword").show();$("#forgotPasswordButton").attr("disabled","disabled");resetPassword()}})}function validateActiveLogin(){var e=false;var t=$("#emailAddress").val();var n=getEncode(t);var r=n.iv;n=n.activate;var i=getEncode($("#password").val(),r);i=i.activate;var s={action:VALIDATE_USER,iv:JSON.stringify(r),encodeUN:JSON.stringify(n),encodePass:JSON.stringify(i),activate:false};$.ajax({type:"POST",url:API_URL,data:s,dataType:"json",async:true,headers:HEADER,error:function(e){$("#signInLoader").addClass("hide");$("#messageContent").html(ERROR_MSG);$("#message").slideDown();setTimeout(function(){$("#message").slideUp()},2e3);return false},success:function(e){if(e.retCode==0){$("#signInLoader").addClass("hide");var n=getByUserName(t);if(n.retCode&&n.user.status==0){$("#signInModal").modal("hide");showAlertBox("Inactive User",loadActivationMessage(n.user.email))}else{$("#messageContent").html(LOGIN_ERROR_MSG);$("#message").slideDown();setTimeout(function(){$("#message").slideUp()},2e3)}}else if(e.retCode==1){if($.session.get("featureCarId")){$.session.set("featureCarRent",true)}if(validateRole(e.user)){$("#signInLoader").hide();$("#signInModal").modal("hide");if(window.location.pathname.indexOf("activation")>-1){window.location=SITE_URL+"index.php"}else{window.location.reload(true)}}}else{$("#signInLoader").hide();$("#messageContent").html(ERROR_MSG);$("#message").slideDown();setTimeout(function(){$("#message").slideUp()},2e3)}}});return e}function forgotPasswordDetails(e){var t;var n=getEncode(e);var r=n.iv;n=n.activate;var i={action:VALIDATE_USER,iv:JSON.stringify(r),encodeUN:JSON.stringify(n),activate:false};$.ajax({type:"POST",url:API_URL,data:i,dataType:"json",async:false,headers:HEADER,error:function(e){return false},success:function(e){t=e}});return t}function sessionManager(e,t,n){var r;$.ajax({type:"POST",url:"session.php",async:false,dataType:"json",data:{key:t,value:n,functionName:e},error:function(e){return false},success:function(e){if(e!=null||typeof e!=undefined){r=e}}});return r}function resetPassword(){var e=forgotPasswordDetails($("#emailAddressForgotPassword").val());var t={action:FORGOT_PASSWORD,username:JSON.stringify(e.user.email),iv:JSON.stringify(e.user.iv),verification:JSON.stringify(e.user.verification)};$.ajax({type:"POST",url:API_URL,data:t,dataType:"json",headers:HEADER,error:function(e){$("#forgotPasswordButton").removeAttr("disabled");$("#loaderForgotPassword").hide();$("#messageContentForgotPassword").html(ERROR_MSG);$("#messageForgotPassword").slideDown();setTimeout(function(){$("#messageForgotPassword").slideUp()},1500);return false},success:function(t){if(t.retCode==-1){$("#messageContentForgotPassword").html(INVALID_USER);$("#messageForgotPassword").slideDown();setTimeout(function(){$("#messageForgotPassword").slideUp()},2e3)}else if(t.retCode==1){var n=getDecodePassword(t.pass,e.user.iv);var r=getEmailBody("forgot_password",e.user.firstName+" "+e.user.lastName,e.user.email,n.password);var i="Password Reset ";var s=sendEmail(e.user.email,i,r);if(s){$("#messageContentForgotPassword").removeClass("alert-error").addClass("alert-warning");$("#messageContentForgotPassword").html(FORGOTPASSWORD_MSG.replace("emailAddress",$("#emailAddressForgotPassword").val()));$("#messageForgotPassword").slideDown();setTimeout(function(){$("#forgotPasswordModal").clearForm();window.location.href=SITE_URL+"index.php"},1500)}else{showAlertBox("Email failure ","Email sending failed",SITE_URL+"index.php")}}else{$("#messageContentForgotPassword").html(ERROR_MSG);$("#messageForgotPassword").slideDown();setTimeout(function(){$("#messageForgotPassword").slideUp()},1500)}$("#forgotPasswordButton").removeAttr("disabled");$("#loaderForgotPassword").hide()}})}function bindCustomSelectBox(e,t,n,r){var i=$("#"+e);if(r){i=$("."+e)}i.select2();if(!t||t.length<=0)return;$.each(t,function(e,t){var r=t.name||t;if(t.region!=null){i.append('<option value="'+r+'">'+r+" - "+t.region+"</option>")}else{i.append('<option value="'+r+'">'+r+"</option>")}if(n){i.select2("val",$(".select2 option:eq(1)").val())}})}function getLocation(e,t,n){var r=getAirports();$.session.set("location",r);bindCustomSelectBox(e,r,t,n)}function getAirports(){var e;var t=sessionManager("getSession","location");if(window.location.pathname.indexOf("index")>-1||t==null){var n={action:GET_LOCATIONS};$.ajax({type:"GET",url:CUSTOM_API_URL,data:n,dataType:"json",headers:HEADER,async:false,error:function(e){showAlertBox("Error",ERROR_MSG)},success:function(t){if(t.retCode){e=t.locations;sessionManager("setSession","location",JSON.stringify(e))}}})}else if(t){e=JSON.parse(t);e=e.sort(sortLocation)}return e}function getBagTypes(e){var t=getBagSize();$.each(t,function(n){$("#"+e).append('<option value="'+n+'">'+t[n]+"</option>")});$("#"+e).select2("val",$(".select2 option:eq(1)").val())}function getBagSize(){var e;var t={action:GET_BAG_SIZES};$.ajax({type:"GET",url:CUSTOM_API_URL,data:t,dataType:"json",headers:HEADER,async:false,error:function(e){showAlertBox("Error",ERROR_MSG)},success:function(t){if(t.retCode){e=t.bagSizes}}});return e}function getSeats(e){var t;var n={action:GET_SEAT};$.ajax({type:"GET",url:CUSTOM_API_URL,data:n,dataType:"json",headers:HEADER,async:false,error:function(e){showAlertBox("Error",ERROR_MSG)},success:function(e){if(e.retCode){t=e.seats}}});$.each(t,function(n){$("#"+e).append('<option value="'+n+'">'+t[n]+"</option>")});$("#"+e).select2("val",$(".select2 option:eq(1)").val());return t}function getBagSizeName(e){var t="";switch(e){case"S":t="Small";break;case"M":t="Medium";break;case"L":t="Large";break}return t}function getBagCode(e){var t="";switch(e){case"small":t="S";break;case"medium":t="M";break;case"large":t="L";break}return t}function moveTotop(){$("html, body").animate({scrollTop:0},"slow");$(window).scroll(function(){$(window).scrollTop()})}function getErrorPopupTemplate(e,t){var n;var r='<div class="popover"><div class="arrow"></div>';r+='<div class="popover-inner">';r+='<div class="popover-content"><p></p></div></div></div>';t=typeof t==undefined||t==null?"top":t;n=$(e.element).popover({trigger:"manual",placement:t,content:e.message,template:r});n.data("popover").options.content=e.message;return $(e.element).popover("show")}function sendEmail(e,t,n){var r=-1;var i={action:SEND_MESSAGE,recipients:JSON.stringify(e),subject:JSON.stringify(t),msg:JSON.stringify(n)};$.ajax({type:"POST",url:API_URL,data:i,dataType:"json",async:false,headers:HEADER,error:function(e){showAlertBox("Error",ERROR_MSG)},success:function(e){r=e.retCode}});return r}function getEmailBody(e,t,n,r,i){var s;var o=String.format('<a href="{0}activation.php{1}">Click Here </a>',SITE_URL,i);switch(e){case"owner_registration":case"renter_registration":s="<div><p><strong>Dear "+t+"</strong>,</p><br />";s+="<p>You have successfully registered with AIRPND.</p>";s+="<p>Please click on the link to activate your account.";s+="</p><p>"+o+"<br><br></p>";s+="<p><strong>Your Credentials:-</strong>:-</p><br />";s+="<p>User Name:<b> "+n+"</b></p>";s+="<p>Password:<b> "+r+"</b></p>";s+="<br /><p>Regards:-</p>";s+="<p>Airpnd Team.</p>";s+="<p><sub><i>This is a system generated";s+="&nbsp;mail. Please do not reply to it.";s+="</i><sub></p></div>";break;case"fb_registration":s="<div><p><strong>Dear "+t+"</strong>,</p><br />";s+="<p>Please click on the link to complete  your ";s+="registration.</p><p>"+o+"<br><br></p>";s+="<p><strong>Your Credentials:-</strong>:-</p><br />";s+="<p>User Name:<b> "+n+"</b></p>";s+="<p>Password:<b> "+r+"</b></p>";s+="<br /><p>Regards:-</p>";s+="<p>Airpnd Team.</p>";s+="<p><sub><i>This is a system generated";s+="&nbsp;mail. Please do not reply to it.";s+="</i><sub></p></div>";break;case"forgot_password":s="<div><p><strong>Dear "+t+"</strong>,</p><br />";s+="<p>Please click on the link to sign in ";s+="AirPnd.</p><p>"+"<a href="+SITE_URL+">Click here</a>";s+="<br><br></p><p><strong>Your login details:-</strong>";s+="</p><br /><p>User Name:<b> "+n+"</b></p>";s+="<p>Password:<b> "+r+"</b></p>";s+="<br /><p>Regards:-</p>";s+="<p>Airpnd Team.</p>";s+="<p><sub><i>This is a system generated";s+="&nbsp;mail. Please do not reply to it.";s+="</i><sub></p></div>";break;case"payment":s="<div><p><strong>Dear "+t+"</strong>,</p><br />";s+="<p><strong>Your Confirmation code is:-</strong></p><br />";s+="<p>Confirmation code :<b> "+$.session.get("confirmationNo")+"</b></p>";s+="<br /><p>Regards:-</p>";s+="<p>Airpnd Team.</p>";s+="<p><sub><i>This is a system generated";s+="&nbsp;mail. Please do not reply to it.";s+="</i><sub></p></div>";break}return s}function getPopUp(e,t,n,r){r=typeof r==undefined||r==null?"":r;$(e).popover({html:true,placement:n,title:r,trigger:"manual",content:function(){return $(t).html()||t}})}function isLoggedIn(){var e=sessionManager("getSession","user");if(e){return true}else{return false}}function showAlertBox(e,t,n){$("#alertBoxModal").modal("hide");$("#alertBox").html(loadContent(e,t,n));$("#alertBoxModal").modal({keyboard:true,backdrop:"static",show:true});$("#alertBoxModal").css({"z-index":"99999",cursor:"pointer",marginTop:"15%"})}function loadContent(e,t,n){n=n||"#";var r='<div class="modal fade" id="alertBoxModal">';r+='<div class="modal-dialog"><div class="modal-content">';r+='<div class="modal-header"><a href="'+n+'"';r+=' class="close closeAlertBox">';r+='&times;</a><h4 class="modal-title" >'+e+"</h4>";r+='</div><div class="modal-body">'+t+"</div>";r+='<div class="modal-footer"><a href="'+n+'"';r+='class="btn btn-default closeAlertBox">OK</a>';r+="</div></div></div></div>";return r}function getPageTitle(){var e="AirPnD - carpool for travelers going From and To AirPorts .";var t=$.session.get("entityNameEditList")!=null?"Edit "+$.session.get("entityNameEditList"):"Edit";var n={trustandsafety:"Trust and Safety",policy:"Privacy Policy",terms:"Terms of Service",ourlocation:"Our Locations",faq:"FAQ",howitworks:"How It Works",support:"Support",contactus:"Contact Us",insurance:"Insurance",blog:"Blog",postride:"Offer Ride",requestride:"Request Ride",bookride:"Book Ride",bookrider:"Book Rider",findride:"Search Driver",findrider:"Search Rider",activation:"Activation",reviews:"Reviews",profile:"My Profile",mybookings:"My Bookings",mylifts:"My Lifts"};var r=window.location.pathname;var i=r.substring(r.lastIndexOf("/")+1,r.length);var s=i.substring(0,i.lastIndexOf(".")).toLowerCase();i=s!=""?s:i;if(i!=""){e=n[i]||e}document.title=e}function makeActive(){var e=$.session.get("menuItem");var t=window.location.pathname;t=t.slice(t.lastIndexOf("/")+1);var n=$.session.get("menuItem");if(t.indexOf(n)>-1){$("."+e).addClass("active")}else{$(".navList").not($("."+e)).removeClass("active")}}function isFbisLoggedin(){if($.session.get("isFBVerified")){$("#firstNameSignUp").attr("disabled","disabled");$("#lastNameSignUp").attr("disabled","disabled");$("#emailSignUp").attr("disabled","disabled");$("#signUpButton").addClass("fbSignUp");$("#fbsignUpLink").addClass("hide");$("#simpleCreate").removeClass("hide")}else{$("#firstNameSignUp").removeAttr("disabled");$("#lastNameSignUp").removeAttr("disabled");$("#emailSignUp").removeAttr("disabled");$("#signUpButton").removeClass("fbSignUp");$("#fbsignUpLink").removeClass("hide");$("#simpleCreate").addClass("hide")}}function loadSignInModal(){$("#signInModal").clearForm();$("#signInModal").modal("show");signInValidation()}function loadSignUpModal(){$("#signUpModal").clearForm();isFbisLoggedin();$("#signUpModal").modal("show");signUpValidation()}function getEncode(e,t){var n;$.ajax({type:"POST",url:"activationFunction.php",async:false,dataType:"json",data:{activationLinkParam:e,iv:typeof t!=undefined?t:"",encode:true},error:function(e){return false},success:function(e){n=e}});return n}function getDecode(e,t){var n;$.ajax({type:"POST",url:"activationFunction.php",async:false,dataType:"json",data:{activationLink:e,iv:t},error:function(e){return false},success:function(e){n=e}});return n}function getDecodePassword(e,t){var n;$.ajax({type:"POST",url:"activationFunction.php",async:false,dataType:"json",data:{password:e,iv:t},error:function(e){return false},success:function(e){n=e}});return n}function getDecodeLink(e,t){var n;$.ajax({type:"POST",url:"activationFunction.php",async:false,dataType:"json",data:{link:e,iv:t},error:function(e){return false},success:function(e){n=e}});return n}function getRentals(e){var t;var n={action:GET_RENTAL,customerId:e};$.ajax({type:"POST",url:CUSTOM_API_URL,data:n,dataType:"json",headers:HEADER,async:false,error:function(e){showAlertBox("Error",ERROR_MSG)},success:function(e){t=e}});return t}function getActivationLink(e,t){var n;var r=t!=null?e+";"+t:e;$.ajax({type:"POST",url:"activationFunction.php",async:false,dataType:"json",data:{activationLinkParam:r,encode:true},error:function(e){return false},success:function(e){n="?activate="+encodeURIComponent(e.activate)+"&iv="+encodeURIComponent(e.iv)}});return n}function getLink(e){var t;$.ajax({type:"POST",url:"activationFunction.php",async:false,dataType:"json",data:{link:e,encode:true},error:function(e){return false},success:function(e){t="?link="+encodeURIComponent(e.link)+"&iv="+encodeURIComponent(e.iv)}});return t}function getOwnerRentals(e){var t;var n={action:GET_OWNER_RENTALS,ownerId:JSON.stringify(e)};$.ajax({type:"POST",url:CUSTOM_API_URL,data:n,dataType:"json",headers:HEADER,async:false,error:function(e){showAlertBox("Error",ERROR_MSG)},success:function(e){t=e}});return t}function getByUserName(e){var t;var n=getEncode(e);var r={action:VALIDATE_USER,iv:JSON.stringify(n.iv),encodeUN:JSON.stringify(n.activate),activate:false};$.ajax({type:"POST",url:API_URL,data:r,dataType:"json",async:false,headers:HEADER,error:function(e){t=-1},success:function(e){t=e}});return t}function processActivation(e,t,n){var r=false;if(e==null||e.user==null){e=getByUserName(t)}if(e.retCode==1){var i=getDecode(e.user.username,e.user.iv);var s=getActivationLink(i.userName);var o=REGISTRATION_SUCCESSFUL_MSG.replace("{emailID}",t);var u=getEmailBody("renter_registration",e.user.firstName+" "+e.user.lastName,t,n,s);var a="Activate Your Airpnd Acccount";if($.session.get("isFBVerified")&&$("#signUpButton").hasClass("fbSignUp")){o="Email with password will be sent to you ";o+="to complete registration";a="Complete your registration";u=getEmailBody("fb_registration",e.user.firstName+" "+e.user.lastName,t,n,s)}r=sendEmail(t,a,u);if(r){$("#signUpLoader").hide();$("#signUpModal .closeIcon").removeClass("hide");$("#signUpButton").removeAttr("disabled");$("#signUpModal").modal("hide");$("#signUpModal").clearForm();showAlertBox("Registration Alert",o)}else{showAlertBox("Email failure ","Email sending failed")}}else{$("#signUpLoader").hide();$("#signUpModal .closeIcon").removeClass("hide");$("#signUpButton").removeAttr("disabled");$("#signUpModal").modal("hide");$("#signUpModal").clearForm();showAlertBox("Registration Error Alert",ERROR_MSG)}return r}function initializeModal(e){$("#"+e).modal({keyboard:false,backdrop:"static",show:false})}function initializeCoursel(e,t){$("#"+e).carousel({interval:t,cycle:true,pause:"hover"})}function updateEntityFeatures(e){var t;var n={action:UPDATE_ENTITY_FEATURES,features:JSON.stringify(e)};$.ajax({type:"POST",url:API_URL,data:n,dataType:"json",async:false,headers:HEADER,error:function(e){t=-1},success:function(e){t=e}});return t}function getFeature(e,t,n,r){var i={id:e,entityId:t,name:n,description:r,type:1,rank:0};return i}function getDriverLicense(e){var t;var n={action:GET_DRIVER_LICENSE,customerId:JSON.stringify(e)};$.ajax({type:"POST",url:CUSTOM_API_URL,data:n,dataType:"json",async:false,headers:HEADER,error:function(e){t=-1},success:function(e){t=e}});return t}function addCustomer(e,t,n,r,i,s,o){s=s!=null?s:"";$.session.set("customerName",e+" "+t);var u;var a={firstName:e,middleName:t,lastName:n,company:"",address1:"",address2:"",city:"",state:"",zipCode:"",country:"",phone1:r,note:s,fax:"",email:i};var f={firstNameShip:"",lastNameShip:"",companyShip:"",address1Ship:"",address2Ship:"",cityShip:"",stateShip:"",zipCodeShip:"",countryShip:"",telephoneShip:"",faxShip:"",emailShip:""};var l={action:ADD_CUSTOMER,customer:JSON.stringify(a),shippingAddress:JSON.stringify(f)};$.ajax({type:"POST",url:API_URL,data:l,dataType:"json",headers:HEADER,async:false,error:function(e){showAlertBox("Error",ERROR_MSG)},success:function(t){u=t;if(!o){addOwner(t.customerId,e,n,i,r)}}});return u}function addUser(e,t,n,r,i,s,o){var u;s=s==null?INACTIVE:s;var a=getEncode(t);var f;if($.session.get("isFBVerified")&&$("#signUpButton").hasClass("fbSignUp")){f={action:REGISTER_USER,userInfoId:JSON.stringify(e),role:CUSTOMER_OWNER_ROLE,iv:JSON.stringify(a.iv),encodeUN:JSON.stringify(a.activate),firstName:JSON.stringify(r),lastName:JSON.stringify(i),email:JSON.stringify(o),status:JSON.stringify(s),genPass:true}}else{var l=getEncode(n,a.iv);f={action:REGISTER_USER,userInfoId:JSON.stringify(e),role:CUSTOMER_OWNER_ROLE,iv:JSON.stringify(a.iv),encodeUN:JSON.stringify(a.activate),encodePass:JSON.stringify(l.activate),firstName:JSON.stringify(r),lastName:JSON.stringify(i),email:JSON.stringify(o),status:JSON.stringify(s),genPass:false}}$.ajax({type:"POST",url:API_URL,data:f,dataType:"json",headers:HEADER,async:false,error:function(e){u=-1},success:function(e){u=e}});return u}function addOwner(e,t,n,r,i,s,o){var u;e=typeof e!=undefined||e!=null?e:"";var a={customerId:e,role:CUSTOMER_OWNER_ROLE,firstName:t,lastName:n,address1:"",address2:"",city:"",state:"",zipCode:"",country:"",email:r,phone1:i,phone2:"",fax:"",note:o||"",subscribed:""};var f={action:ADD_OWNER,owner:JSON.stringify(a)};$.ajax({type:"POST",url:API_URL,data:f,dataType:"json",headers:HEADER,async:false,error:function(e){u=-1},success:function(e){u=e;if(!s){addUser(e.ownerId,$("#emailAddress").val(),$("#password").val(),t,n,ACTIVE,$("#emailAddress").val())}}});return u}function validateRole(e){var t;switch(e.role){case"0":showAlertBox("Login Error","Please contact MindShare support.");break;case"1":case"2":getCustomerByCustomerId(e);case"3":t=getOwnerByOwnerId(e.userInfoId);if(t==-1){addCustomer(e.firstName,"",e.lastName,"",e.email,true)}break}var n=getByUserName(e.email);sessionManager("setSession","user",n.user);sessionManager("setSession","customerId",getOwnerByOwnerId(n.user.userInfoId));return true}function getCustomerByCustomerId(e,t){var n=e.userInfoId||e;var r;var i={action:GET_CUSTOMER_BY_ID,id:n};$.ajax({type:"POST",url:API_URL,data:i,dataType:"xml",headers:HEADER,async:false,error:function(e){showAlertBox("Error",ERROR_MSG)},success:function(n){if(t){r=n}else if(parseInt($("response id",n).text())!=-1){addOwner($("returnVal id",this).text(),e.firstName,e.lastName,e.email,"")}else{addCustomer(e.firstName,"",e.lastName,"",e.email)}}});return r}function getOwnerByOwnerId(e,t){var n;var r={action:GET_OWNER_BY_ID,id:e};$.ajax({type:"POST",url:API_URL,data:r,dataType:"xml",headers:HEADER,async:false,error:function(e){showAlertBox("Error",ERROR_MSG)},success:function(e){if(parseInt($("response id",e).text())!=-1){if(t){n=e}else{n=$("response customerId",e).text()}}}});return n}function liftsByCustomer(e){var t;var n={action:LIFTS_BY_CUSTOMER,customerId:JSON.stringify(e)};$.ajax({type:"POST",url:CUSTOM_API_URL,data:n,dataType:"json",headers:HEADER,async:false,error:function(e){showAlertBox("Error",ERROR_MSG)},success:function(e){t=e}});return t}function sortByYear(e){return e.sort(function(e,t){var n=parseInt(e.number.split("-")[1]);var r=parseInt(t.number.split("-")[1]);return n<r?-1:n>r?0:1}).reverse()}function sendTextMessage(e,t){var n;var r={action:SEND_TEXT_MESSAGE,phone:JSON.stringify(e),msg:JSON.stringify(t)};$.ajax({type:"POST",url:API_URL,data:r,async:false,dataType:"json",headers:HEADER,error:function(e){n=-1},success:function(e){n=e}});return n}function getMemberOrder(e){var t=0;e=e||sessionManager("getSession","customerId");var n={action:GET_MEM_ORDER,customerId:JSON.stringify(e)};$.ajax({type:"POST",url:CUSTOM_API_URL,data:n,dataType:"json",headers:HEADER,async:false,error:function(e){t=-1},success:function(e){t=e}});return t}function resendActivation(e){var t=getActivationLink(e);var n=sendEmail(e,"Activate Your AIRPND Acccount",getActivationBody(t));return n}function getActivationBody(e){e="activation.php"+e;var t="<div><p>Please click on below link to ";t+="activate your account.</p>";t+='<p><a href="'+SITE_URL+e+'"> Activate</a>';t+=" to activate your account.</p>";t+="<br /><p>Regards:-</p>";t+="<p>AIRPND Team.</p>";t+="<p><sub><i>This is a system generated";t+="&nbsp;mail. Please do not reply to it.";t+="</i><sub></p></div>";return t}function loadActivationMessage(e){var t="This user <b>"+e+"</b> is inactive. ";t+="Please activate your account";t+=' to login into AIRPND. <a class="activationButton"';t+=' for="'+e+'"';t+='href="#">Resend Link ?</a>';return t}function getCategoryName(e){var t;var n={action:CATEGORY_BY_NAME,name:e};$.ajax({type:"POST",url:API_URL,data:n,dataType:"xml",headers:HEADER,async:false,error:function(e){showAlertBox("Error",ERROR_MSG)},success:function(e){t=$("response returnVal id",e).text()}});return t}function getEntitiesByCategory(e){var t;var n={action:GET_ENTITIES_BY_CATEGORY,categoryId:e};$.ajax({type:"POST",url:API_URL,data:n,dataType:"json",headers:HEADER,async:false,error:function(e){showAlertBox("Error",ERROR_MSG)},success:function(e){t=e}});return t}function rideByCustomer(e){var t;var n={action:RIDES_BY_CUSTOMER,customerId:e};$.ajax({type:"POST",url:CUSTOM_API_URL,data:n,dataType:"json",headers:HEADER,async:false,error:function(e){showAlertBox("Error",ERROR_MSG)},success:function(e){t=e}});return t}function toggleSection(e){var t=sessionManager("getSession","user");if(t){$.each(e,function(e,t){$("#"+t.id).removeClass("hide")})}else{loadSignInModal()}}function getInvoiceType(e){var t;e=e||INVOICE_TYPE;var n={action:GET_INVOICE_TYPE,name:e};$.ajax({type:"POST",url:API_URL,data:n,dataType:"xml",headers:HEADER,async:false,error:function(e){showAlertBox("Error",ERROR_MSG)},success:function(e){$(e).find("response").each(function(){var e=$(this).find("id").text();if(t!=""){t=e}})}});return t}function getPrice(e){var t=0;var n={action:GET_PRICE,entityId:e};$.ajax({type:"POST",url:API_URL,data:n,dataType:"json",async:false,headers:HEADER,error:function(e){return false},success:function(e){t=e.priceList}});return t}function getSystemUser(){var e;var t={action:GET_SYSTEM_USER};$.ajax({type:"POST",url:API_URL,data:t,dataType:"xml",headers:HEADER,async:false,error:function(e){return false},success:function(t){$(t).find("response").each(function(){if($(this).find("id").text()!=""){e=$(this).find("id").text()}})}});return e}function getLiftById(e){var t;var n={action:GET_A_LIFT,liftId:e};$.ajax({type:"POST",url:CUSTOM_API_URL,data:n,dataType:"json",headers:HEADER,async:false,error:function(e){t=-1},success:function(e){t=e}});return t}function getARide(e){var t;var n={action:GET_A_RIDE,rideId:JSON.stringify(e)};$.ajax({type:"POST",url:CUSTOM_API_URL,data:n,dataType:"json",headers:HEADER,async:false,error:function(e){t=-1},success:function(e){t=e}});return t}function sortByDateTime(e){return e.sort(function(e,t){var n=new Date(t.dt);var r=new Date;return r-n})}function getUrlVars(){var e=[],t;var n=window.location.href;var r=n.slice(n.indexOf("?")+1).split("&");for(var i=0;i<r.length;i++){t=r[i].split("=");e.push(t[0]);e[t[0]]=t[1]}return e}function sortByKey(e,t,n){n=n==1?1:-1;var r=e.sort(function(e,r){x=e[t];y=r[t];if(Date.parse(x)){var i=(new Date(x)).getTime();var s=(new Date(y)).getTime();if(n==1){return i>s?1:-1}else{return i<s?1:-1}}else{if(n==1){return parseFloat(y)<parseFloat(x)?1:-1}else{return parseFloat(y)>parseFloat(x)?1:-1}}return 0});return r}function pendingPaymentLift(e){var t=-1;var n={action:PENDING_PAYMENT_A_LIFT,liftId:JSON.stringify(e)};$.ajax({type:"POST",url:CUSTOM_API_URL,data:n,dataType:"json",headers:HEADER,async:false,error:function(e){showAlertBox("Error",ERROR_MSG)},success:function(e){t=e.retCode}});return t}function pendingConfirmLift(e){var t=-1;var n={action:PENDING_CONFIRM_A_LIFT,liftId:JSON.stringify(e)};$.ajax({type:"POST",url:CUSTOM_API_URL,data:n,dataType:"json",headers:HEADER,async:false,error:function(e){showAlertBox("Error",ERROR_MSG)},success:function(e){t=e.retCode}});return t}function confirmALift(e){var t=-1;var n={action:CONFIRM_A_LIFT,liftId:JSON.stringify(e)};$.ajax({type:"POST",url:CUSTOM_API_URL,data:n,dataType:"json",headers:HEADER,async:false,error:function(e){showAlertBox("Error",ERROR_MSG)},success:function(e){t=e.retCode}});return t}function processPayment(){var e=sessionManager("getSession","customerId");var t=getARide($.session.get("rideId"));var n=true;if(t.retCode&&t.ride!=null&&t.ride.id>0){var r=t.ride.entityId;var i=getPrice(r);$.each(i,function(e,t){$.session.set("liftBalance",t.priceVal)});var s=createAirspndOrder(r,e);if(parseInt(s)<=0){n=false;$(".modal").modal("hide");showAlertBox("Error Alert",ERROR_MSG)}else{n=makePayment(e,s,$.session.get("liftBalance"))}}return n}function makePayment(e,t,n){var r=true;var i=NO_ID;var s=getCustomerByCustomerId(e,true);if($("firstName",s).text().toLowerCase()==$("#firstNamePayment").val().toLowerCase()||$("lastName",s).text().toLowerCase()==$("#lastNamePayment").val().toLowerCase()){i=e}var o=$("#ccExpMonth option:selected").val();if($("#ccExpMonth option:selected").val().length==1){o="0"+$("#ccExpMonth option:selected").val()}var u={id:$("id",s).text(),parentID:$("parentId",s).text(),typeId:$("typeId",s).text(),status:$("status",s).text(),number:$("number",s).text(),firstName:$("#firstNamePayment").val(),lastName:$("#lastNamePayment").val(),middleName:$("#middleNamePayment").val(),companyName:$("companyName",s).text(),address1:$("#steetAddress").val(),address2:"",city:$("#city").val(),state:$("#state option:selected").val(),zipCode:$("#zipCode").val(),country:COUNTRY_NAME,email:$("email",s).text(),phone1:$("phone1",s).text(),phone2:$("phone2",s).text(),fax:$("fax",s).text(),balance:n,note:$("note",s).text(),taxRate:$("taxRate",s).text(),subscribed:$("subscribed",s).text()};var a={id:NO_ID,orderId:t,payerId:i,ccType:$("#ccType option:selected").val(),ccNum:$("#ccNumber").val(),ccCode:$("#cvv").val(),ccExpMonth:o,ccExpYear:$("#ccExpYear option:selected").val(),amount:n};var f={action:MAKE_PAYMENT,payer:JSON.stringify(u),payment:JSON.stringify(a)};$.ajax({type:"POST",url:API_URL,data:f,dataType:"json",headers:HEADER,error:function(e){$(".modal").modal("hide")},success:function(e){var t=window.location.pathname;if(e.returnCode==-1){r=false;showAlertBox("Payment Failure Alert",e.errorMsg,SITE_URL+t.split("/")[1])}else if(e.returnCode==1){var n=confirmALift($.session.get("liftId"));if(n){$(".modal").modal("hide");showAlertBox("Confirm Lift Alert","Your lift has been confirmed",SITE_URL+t.split("/")[1]);var i=sendTextMessage($("phone1",s).text(),"Your Confirmation no :"+"\n"+$.session.get("confirmationNo"));var o=getEmailBody("payment",$("firstName",s).text()+" "+$("lastName",s).text());var u="Payment confirmation ";var a=sendEmail($("email",s).text(),u,o);if(i.retCode==1){$.session.clear("confirmationNo");showAlertBox("Message Sent","Confirmation number been sent successfully",SITE_URL+"#")}if(!a){$.session.clear("confirmationNo");showAlertBox("Mail failure","Email Sending Failed",SITE_URL+"#")}}}}});return r}function createAirspndOrder(e,t){var n=-1;var r=getInvoiceType(RENTAL_INVOICE_TYPE);var i=getCategoryName(DRIVE);var s=[];var o={facilityId:NO_ID,binId:NO_ID,entityTypeId:i,entityId:e,price:$.session.get("liftBalance"),cost:$.session.get("liftBalance"),quantity:1};s.push(o);var u={action:CREATE_ORDER,customerId:t,userId:getSystemUser(),invoiceTypeId:r,tax:TAX,fee:FEE,status:PAID_STATUS,ols:JSON.stringify(s)};$.ajax({type:"POST",url:API_URL,data:u,dataType:"json",async:false,headers:HEADER,error:function(e){n=-1},success:function(e){if(parseInt(e.retCode)==1){n=e.orderNumber.split("-")[1];$.session.set("confirmationNo",e.orderNumber)}else{n=0;$.session.clear("confirmationNo")}}});return n}function getPriceForRide(e,t,n){var r=-1;var i={action:GET_PRICE_FOR_RIDE,airportName:JSON.stringify(e),driverAddress:JSON.stringify(t),miles:JSON.stringify(n)};$.ajax({type:"POST",url:CUSTOM_API_URL,data:i,dataType:"json",headers:HEADER,async:false,error:function(e){r=-1},success:function(e){if(e.retCode)r=e.maxPerRider}});return r}function sortLocation(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:-1}$(function(){var e;var t;$("#socialConnect").share({networks:["facebook","pinterest","googleplus","twitter","linkedin"],theme:"square"});$("#phoneMessage").on("click",function(){$("#phoneNumber").toggleClass("ignore");if(!$(this).is(":checked")){$("#phoneNumber").next(".popover").remove()}});getPageTitle();$("#cvv,#ccNumber,#zipCode,.numeric").filterType("numeric");$("#firstNamePayment,#middleNamePayment,#lastNamePayment,#city,.alpha").filterType("alpha");$(".specific").filterType("special");$(".alphaNumeric").filterType("alphanumeric");makeActive();$.validator.addMethod("usPhoneFormat",function(e,t){return this.optional(t)||/(\(\d{3}\) )?(\d{3}-){1,2}(\d{4})/.test(e)},"Please enter phone number");$('input[type!="checkbox"]').on("click",function(){$('input[type!="checkbox"]').removeClass("error");var e=$(this).closest("form").attr("id");if(e){$(".popover","#"+e).remove()}});$("select").not(".ignore").on("change",function(){if($(this).valid()){$(this).next().remove()}});initializeModal("signInModal");initializeModal("signUpModal");$("#firstNameSignUp").filterType("alpha");$("#middleNameSignUp").filterType("alpha");$("#lastNameSignUp").filterType("alpha");$("#licenseNumber").filterType("alphanumeric");$("#licenseState").filterType("alpha");$("#id_qty_1").filterType("numeric");$("#id_qty_2").filterType("numeric");$("#id_qty_3").filterType("numeric");$("#id_qty_4").filterType("numeric");initializeModal("forgotPasswordModal");$(".nav .navList .menuLink").on("click",function(){var e=$(this).attr("for");$.session.set("menuItem",e);window.location=SITE_URL+e+".php"});$(document).on("click",".close,.closeAlertBox",function(){$("#alertBoxModal").modal("hide")});$(document).on("click","#logOut",function(){if(Boolean($.session.get("fbLoggedIn"))){fbLogOut()}$.session.clearAll();sessionManager("destroySession");window.location=SITE_URL+"index.php"});$(document).on("click",".add-on .icon-calendar",function(){$(this).closest("div").children('input[type="text"]').datetimepicker("show")});$(document).on("click",".closeIcon",function(){var e=window.location.pathname.toLowerCase();var t=["postride","requestride","bookrider","bookride","mybookings","mylifts"];$(this).clearForm();$.each(t,function(t,n){if(e.indexOf(n)>-1){window.location=SITE_URL+"index.php"}})});$(".dropdown-menu a").not("#logOut").on("click",function(){$.session.set("airspndPage",$(this).attr("for"));window.location=$(this).attr("href")});$(".dropdown,.dropdown-toggle").dropdown();$(".dropdown-menu li a").on("click",function(){$.session.set("userPage",$(this).attr("for"))});$(document).on("focus","#phoneNumber",function(){$(this).mask(maskUSFormat)});$("#fbsignUpLink").off("click").on("click",function(){$.session.set("modalPopUp","signUpModal");fbSignUp();isFbisLoggedin();return false});$("#fbLoginLink").off("click").on("click",function(){$.session.set("fbLoggedIn",true);$.session.set("modalPopUp","signInModal");fbLogin();isFbisLoggedin();return false});$(document).on("click","#forgotPassword",function(){$("#forgotPasswordModal").modal("show");$("#signInModal").modal("hide");forgotPasswordValidation()});$(document).on("click","#signInTop,#signInLink",function(){$("#signInModal").modal("show");$("#signUpModal").modal("hide");$("#forgotPasswordModal").modal("hide");signInValidation();return false});$(document).on("click","#createAccount ,#simpleCreate",function(){$.session.clear("isFBVerified");$("#signUpModal").resetForm();$("#signUpButton").removeAttr("disabled");$("#signUpLoader").hide();$("#fbcSuccess").addClass("hide");$("#signUpButton").removeClass("fbSignUp");$("#simpleCreate").addClass("hide");$("#fbsignUpLink").removeClass("hide");$("#simpleCreate").addClass("hide");$("#passwordDiv").removeClass("hide");$("#confirmPasswordDiv").removeClass("hide");$("#firstNameSignUp").removeAttr("disabled");$("#lastNameSignUp").removeAttr("disabled");$("#middleNameSignUp").removeAttr("disabled");$("#emailSignUp").removeAttr("disabled");$("#signUpModal").modal("show");$("#signInModal").modal("hide");signUpValidation();if(window.location.pathname.indexOf("result")>-1){$("#findACar").attr("checked","checked")}return false});$(document).on("click",".closeIcon",function(){var e="";var t="";if($("img",this).attr("alt").indexOf("signIn")>0){e="#signInForm";t="#signInModal"}else if($("img",this).attr("alt").indexOf("signUp")>0){e="#signUpForm";t="#signUpModal"}else if($("img",this).attr("alt").indexOf("forgotPassword")>0){e="#forgotPasswordForm";t="#forgotPasswordModal"}$(t).modal("hide")});$(document).on("click",".popover-inner",function(){$(this).closest(".popover").remove()});$(document).on("blur",'input[name="check"],#phoneNumber',function(){$(this).valid()});$(".socialConnect img").on("click",function(){var e=$(this).attr("alt");switch(e){case"facebook":e=FACEBOOK;break;case"twitter":e=TWITTER;break;case"vimeo":e=VIMEO;break;case"flickr":e=FLICKR;break}window.location=e});$(document).on("click",".activationButton",function(){var e=$(this).attr("for");if(resendActivation(e)){$("#alertBoxModal").modal("hide");showAlertBox("Activation Email Alert",EMAIL_SUCCESS.replace("emailID",e))}else{showAlertBox("Error",ERROR_MSG)}});$(".time,.date").on("keydown",function(){return false});$(".date,.time,#passwordSignUp,#confirmPasswordSignUp,#accountNumber").bind("cut copy paste",function(){return false})});$.session={get:function(e){return window.sessionStorage.getItem(e)},set:function(e,t){window.sessionStorage.setItem(e,t)},clear:function(e){window.sessionStorage.removeItem(e)},clearAll:function(){window.sessionStorage.clear()}};$(window).on("load",function(){$("#pageLoaderModal").fadeOut("slow",function(){$(this).remove()})});$.fn.filterType=function(e){switch(e.toLowerCase()){case"alpha":$(this).alpha();break;case"numeric":$(this).numeric();break;case"alphanumeric":$(this).alphanumeric();break;case"special":$(this).special();break}};$.getDateTime={date:function(e){return e.split(" ")[0]},time:function(e,t){if(t){var n=Number(e.match(/^(\d+)/)[1]);var r=Number(e.match(/:(\d+)/)[1]);var i=e.match(/\s(.*)$/)[1];if(i=="PM"&&n<12)n=n+12;if(i=="AM"&&n==12)n=n-12;var s=n.toString();var o=r.toString();if(n<10)s="0"+s;if(r<10)o="0"+o;return s+":"+o}else{e=e.replace(" ","_");e=e.split("_")[1]}return e},dateTime:function(e){e=new Date(e);e=e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()+" "+e.getHours()+":"+e.getMinutes();return e},formatDateTime:function(e){e=e.split(" ");var t=new Date(e[0]);var n=e[1].split(":");var r=n[0];var i=n[1];var s=r>=12?"PM":"AM";r=r>12?r-12:r;r=r=="00"?12:r;n=r+" : "+i+" "+s;e=months[t.getMonth()+1]+" "+t.getDate()+", "+t.getFullYear()+" "+n;return e},datePickerDateTime:function(e){e=e.split(" ");var t=new Date(e[0]);var n=e[1];var r=n.split(":")[0];var i=n.split(":")[1];var s=r>=12?"PM":"AM";r=r>12?r-12:r;r=r=="00"?12:r;n=r+":"+i+" "+s;e=t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()+" "+n;return e},formatDate:function(e){e=e.split(" ");var t=new Date(e[0]);e=months[t.getMonth()+1]+" "+t.getDate()+", "+t.getFullYear();return e},formatTime:function(e){e=new Date(e);var t=e.getHours();var n=e.getMinutes();var r=t>=12?"PM":"AM";t=t>12?t-12:t;t=t=="00"?12:t;t=t<10?"0"+t:t;n=n<10?"0"+n:n;return t+":"+n+" "+r},convertToSQL:function(e){var t=new Date(e);var n=t.getMonth()+1;n=n<10?"0"+n:n;var r=t.getHours();r=r<10?"0"+r:r;var i=t.getMinutes();i=i<10?"0"+i:i;var s=t.getDate();s=s<10?"0"+s:s;var o=t.getSeconds();o=o<10?"0"+o:o;e=t.getFullYear()+"-"+n+"-"+s+" "+r+":"+i+":"+o;return e}};$.fn.dateTimePicker=function(){var e=new Date;$(this).datetimepicker({autoSize:true,minDate:"today",dateFormat:DATE_FORMAT,timeFormat:"hh:mm TT",hour:e.getHours(),minute:e.getMinutes(),onSelect:function(e,t){var n=$.datepicker.formatDate("mm-dd-yy",new Date(e));var r=$.datepicker.formatDate("mm-dd-yy",new Date);if(n==r){if((new Date(e)).getTime()<(new Date).getTime()){$.validator.addMethod("minStrict",function(t,n,r){t=(new Date(e)).getTime();return t>r});$(this).rules("add",{required:true,minStrict:(new Date).getTime(),messages:{required:"please enter time",minStrict:jQuery.format("Time should"+" "+"be greater than current time")}});$(this).next(".popover").show();$(this).popover("show")}else{$(this).rules("remove","minStrict");$(this).next(".popover").remove();$(this).addClass("ignore");$(this).removeClass("error")}}else{$(this).rules("remove","minStrict");$(this).next(".popover").remove();$(this).addClass("ignore");$(this).removeClass("error")}},onClose:function(e,t){var n=$.datepicker.formatDate("mm-dd-yy",new Date(e));var r=$.datepicker.formatDate("mm-dd-yy",new Date);if(n==r){if((new Date(e)).getTime()<(new Date).getTime()){$.validator.addMethod("minStrict",function(t,n,r){t=(new Date(e)).getTime();return t>r});$(this).rules("add",{required:true,minStrict:(new Date).getTime(),messages:{required:"please enter time",minStrict:jQuery.format("Time should  be greater"+" "+"than current time")}});$(this).popover("show")}else{$(this).rules("remove","minStrict");$(this).next(".popover").remove();$(this).addClass("ignore");$(this).removeClass("error")}}else{$(this).rules("remove","minStrict");$(this).next(".popover").remove();$(this).addClass("ignore");$(this).removeClass("error")}}}).val("");$(this).datetimepicker("option","defaultDate",0)};$.fn.datePicker=function(e){_dateInst=$(this);if(!$(this).data("datePicker")){var t=new Date;$(this).datepicker({autoSize:true,minDate:"today",dateFormat:DATE_FORMAT,onSelect:function(e,t){var n=$.datepicker.formatDate("mm-dd-yy",new Date(e));var r=$.datepicker.formatDate("mm-dd-yy",new Date);if(n==r){var i=e+" "+$(_timeInst).val();if((new Date(i)).getTime()<(new Date).getTime()){$.validator.addMethod("minStrict",function(e,t,n){e=(new Date(i)).getTime();return e>n});$(_timeInst).rules("add",{required:true,minStrict:(new Date).getTime(),messages:{required:"please enter time",minStrict:jQuery.format("Time should  be greater"+" "+"than current time")}});$(_timeInst).popover("show")}else{$(_timeInst).rules("remove","minStrict");$(_timeInst).next(".popover").remove();$(_timeInst).addClass("ignore");$(_timeInst).removeClass("error")}}else{$(_timeInst).rules("remove","minStrict");$(_timeInst).next(".popover").remove();$(_timeInst).addClass("ignore");$(_timeInst).removeClass("error")}}}).val("");$(this).data("datePicker",true);$(this).datepicker("option","defaultDate",0)}if(e){$(this).datetimepicker("setDate",e)}};$.fn.timePicker=function(e){_timeInst=$(this);if(!$(this).data("timePicker")){$(this).timepicker({timeFormat:"hh:mm TT",onSelect:function(e,t){var n=$.datepicker.formatDate("mm-dd-yy",new Date($(_dateInst).val()));var r=$.datepicker.formatDate("mm-dd-yy",new Date);if(n==r){var i=$(_dateInst).val()+" "+e;if((new Date(i)).getTime()<(new Date).getTime()){$.validator.addMethod("minStrict",function(e,t,n){e=(new Date(i)).getTime();return e>n});$(this).rules("add",{required:true,minStrict:(new Date).getTime(),messages:{required:"Please enter time",minStrict:jQuery.format("Time should  be greater"+" "+"than current time")}});$(this).popover("show")}else{$(this).rules("remove","minStrict");$(this).next(".popover").remove();$(this).addClass("ignore");$(this).removeClass("error")}}else{$(this).rules("remove","minStrict");$(this).next(".popover").remove();$(this).addClass("ignore");$(this).removeClass("error")}}});$(this).data("timePicker",true)}if(e){$(this).timepicker("setTime",e)}};$.fn.getSlider=function(e,t,n,r,i){n=n==null?"":n;t=t==null?"":t;$(this).slider({range:"max",min:1,max:50,step:i||1,value:r||30,slide:function(r,i){$("#"+e).html(n+i.value+t)}})};String.format=function(){var e=arguments[0];for(var t=1;t<arguments.length;t++){var n=new RegExp("\\{"+(t-1)+"\\}","gm");e=e.replace(n,arguments[t])}return e};$.fn.clearForm=function(){var e=$(this).closest(".modal").attr("id");var t=$(this).closest(".modal").find("form").attr("id");$(".popover","#"+t).remove();$("#"+t).find("input").removeClass("error");$("#"+t).find("input").removeClass("success");$("#"+t).find("input").val("");$("textarea").val("");$("textarea").removeClass("success");$("#"+e).modal("hide")};$.fn.resetForm=function(){$(".popover",this).remove();$(this).find("input").removeClass("error");$(this).find("input").removeClass("success");$(this).find("input").val("");$(this).find("textarea").removeClass("error");$(this).find("textarea").removeClass("success");$(this).find("textarea").val("")};$.fn.contentSlider=function(e,t,n){$(this).liquidSlider({autoHeight:false,mobileNavDefaultText:e,slideEaseFunction:"animate.css",slideEaseDuration:100,heightEaseDuration:100,animateIn:"bounceInDown",animateOut:"bounceInUP",firstPanelToLoad:n||1,hideSideArrows:t,hoverArrows:!t})};$.fn.autoComplete=function(e){var t=getAirports();$(this).autocomplete({minLength:2,source:function(e,n){var r=new RegExp(e.term,"i");var i=$.grep(t,function(e){e=e.name;return r.test(e)});n($.map(i,function(e,t){return e.name}))},change:function(e,t){if(t.item==null){$(this).val("");$(this).focus()}}})}
